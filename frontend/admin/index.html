 <!DOCTYPE html>
<html>
<head>
<title>Solar Protocol</title>
</head>
<body>

<h1>Admin Console</h1>

<div id="server list"><h2>Active Servers:</h2></div>

<script>
	let tempIPList = ["67.85.62.144","108.29.41.133","74.73.93.241"];
	//read deviceList
	let request = new XMLHttpRequest();

	/*request.open('GET', requestURL);
	request.responseType = 'json';
	request.send();

	let deviceList = request.response;*/

	//add get device list to api

	//for IPs in list
	for (let i = 0; i < tempIPList.length; i++){
		pingServer(tempIPList[i])
	}
	
	function pingServer(dst){
	//get voltage & time stamp
		let infoNeeded = "PV-voltage";
		let requestURL = "http://" + dst + "/api/v1/api.php?value="+infoNeeded;
		console.log(requestURL);

		request.open('GET', requestURL);
		//request.responseType = 'json';
		request.send();

		populate(request.response, dst, infoNeeded);
	}

	function populate(dataToDisplay, dst, infoName) {
		const sList = document.getElementById('server list');
		const serverH3 = document.createElement('h3');
		serverH3.textContent = 'Server: ' + dst;
		const serverInfo = document.createElement('p');
		serverInfo.textContent = infoName + ': ' + dataToDisplay;
		serverH3.appendChild(serverInfo);
		sList.appendChild(serverH3);
	}

</script>

</body>
</html> 