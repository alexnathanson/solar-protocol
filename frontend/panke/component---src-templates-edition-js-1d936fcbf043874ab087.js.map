{"version":3,"sources":["webpack:///./src/components/content-block.js","webpack:///./src/components/slideshow.js","webpack:///./node_modules/@stripe/stripe-js/dist/stripe.esm.js","webpack:///./src/components/checkout.js","webpack:///./src/templates/edition.js"],"names":["blockTitle","blockContent","className","dangerouslySetInnerHTML","__html","childMarkdownRemark","html","slides","length","id","data-ride","map","index","sizes","sldto","cls","data-target","data-slide-to","role","fluid","description","alt","aspectRatio","href","data-slide","aria-hidden","V3_URL","V3_URL_REGEX","EXISTING_SCRIPT_MESSAGE","stripePromise","loadScript","params","Promise","resolve","reject","window","Stripe","console","warn","script","scripts","document","querySelectorAll","concat","i","test","src","findScript","queryString","advancedFraudSignals","createElement","headOrBody","head","body","Error","appendChild","injectScript","addEventListener","error","initStripe","maybeStripe","args","startTime","stripe","apply","undefined","_registerWrapper","name","version","registerWrapper","stripePromise$1","then","loadCalled","err","buttonStyles","fontSize","textAlign","color","padding","letterSpacing","textTransform","border","borderRadius","background","buttonDisabledStyles","opacity","cursor","worldCountries","getStripe","_len","arguments","Array","_key","Date","now","loadStripe","process","Checkout","slug","priceID","url","location","origin","useState","loading","setLoading","redirectToCheckout","event","a","preventDefault","mode","lineItems","price","quantity","shippingAddressCollection","allowedCountries","successUrl","cancelUrl","disabled","style","onClick","EditionTemplate","getChechoutStatus","indexOf","substr","render","ImageOrSlides","FurtherContentBlocks","edition","get","this","props","editionImpressionsSlideshow","featuredImage","furtherInformationBlocks","title","childContentfulContentBlockBlockContentTextNode","key","EditionCheckout","checkoutStatus","stripePriceId","subtitleShortDescription","React","Component"],"mappings":"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","file":"component---src-templates-edition-js-1d936fcbf043874ab087.js","sourcesContent":["import React from 'react'\n\nexport default ({ blockTitle, blockContent }) => (\n        <section className=\"further\">\n          <div className=\"row\">\n            <div className=\"col-md-4 col-sm-4 col-xs-12\">\n                      <h2>{blockTitle}</h2>\n                  </div>\n            <div className=\"col-md-8 col-sm-8 col-xs-12\">\n              {<div dangerouslySetInnerHTML={{\n                __html: blockContent.childMarkdownRemark.html\n              }} />}\n          </div>\n          </div>\n        </section>\n)\n","import React from 'react'\nimport Img from 'gatsby-image'\n//import Carousel from 'react-responsive-carousel'\n\nexport default ({slides, length}) => (\n  <div id=\"myCarousel\" className=\"row carousel slide\" data-ride=\"carousel\">\n\n    {/* Indicators */}\n    <ol className=\"carousel-indicators\">\n      {slides.map(({sizes}, index ) => {\n        var sldto = index;\n        var cls = (index === 0) ? 'active' : '';\n        return (\n          <li data-target=\"#myCarousel\" data-slide-to={sldto} className={cls}></li>\n        )\n      })}\n    </ol>\n\n    {/* Wrapper for slides */}\n    <div className=\"carousel-inner\" role=\"listbox\">\n\n      {slides.map(({fluid, description}, index ) => {\n        var cls = (index === 0) ? 'carousel-item active' : 'carousel-item';\n        return (\n          <div className={cls}>\n            <div className=\"col-md-12 col-sm-12 col-xs-12\">\n                <div className=\"image-wrapper 3-col\">\n                    <Img alt=\"FeaturedImage\" fluid={{...fluid , aspectRatio: 16/9}} />\n                </div>\n                <p>{description}</p>\n            </div>\n          </div>\n        )\n      })}\n\n\n\n    </div>\n\n    {/* Left and right controls */}\n\n    <a className=\"carousel-control-prev\" href=\"#myCarousel\" role=\"button\" data-slide=\"prev\">\n        <span className=\"carousel-control-prev-icon\" aria-hidden=\"true\"></span>\n        <span className=\"sr-only\">Previous</span>\n    </a>\n    <a className=\"carousel-control-next\" href=\"#myCarousel\" role=\"button\" data-slide=\"next\">\n        <span className=\"carousel-control-next-icon\" aria-hidden=\"true\"></span>\n        <span className=\"sr-only\">Next</span>\n    </a>\n  </div>\n\n)\n","var V3_URL = 'https://js.stripe.com/v3';\nvar V3_URL_REGEX = /^https:\\/\\/js\\.stripe\\.com\\/v3\\/?(\\?.*)?$/;\nvar EXISTING_SCRIPT_MESSAGE = 'loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used';\n\nvar findScript = function findScript() {\n  var scripts = document.querySelectorAll(\"script[src^=\\\"\".concat(V3_URL, \"\\\"]\"));\n\n  for (var i = 0; i < scripts.length; i++) {\n    var script = scripts[i];\n\n    if (!V3_URL_REGEX.test(script.src)) {\n      continue;\n    }\n\n    return script;\n  }\n\n  return null;\n};\n\nvar injectScript = function injectScript(params) {\n  var queryString = params && !params.advancedFraudSignals ? '?advancedFraudSignals=false' : '';\n  var script = document.createElement('script');\n  script.src = \"\".concat(V3_URL).concat(queryString);\n  var headOrBody = document.head || document.body;\n\n  if (!headOrBody) {\n    throw new Error('Expected document.body not to be null. Stripe.js requires a <body> element.');\n  }\n\n  headOrBody.appendChild(script);\n  return script;\n};\n\nvar registerWrapper = function registerWrapper(stripe, startTime) {\n  if (!stripe || !stripe._registerWrapper) {\n    return;\n  }\n\n  stripe._registerWrapper({\n    name: 'stripe-js',\n    version: \"1.22.0\",\n    startTime: startTime\n  });\n};\n\nvar stripePromise = null;\n\nvar loadScript = function loadScript(params) {\n  // Ensure that we only attempt to load Stripe.js at most once\n  if (stripePromise !== null) {\n    return stripePromise;\n  }\n\n  stripePromise = new Promise(function (resolve, reject) {\n    if (typeof window === 'undefined') {\n      // Resolve to null when imported server side. This makes the module\n      // safe to import in an isomorphic code base.\n      resolve(null);\n      return;\n    }\n\n    if (window.Stripe && params) {\n      console.warn(EXISTING_SCRIPT_MESSAGE);\n    }\n\n    if (window.Stripe) {\n      resolve(window.Stripe);\n      return;\n    }\n\n    try {\n      var script = findScript();\n\n      if (script && params) {\n        console.warn(EXISTING_SCRIPT_MESSAGE);\n      } else if (!script) {\n        script = injectScript(params);\n      }\n\n      script.addEventListener('load', function () {\n        if (window.Stripe) {\n          resolve(window.Stripe);\n        } else {\n          reject(new Error('Stripe.js not available'));\n        }\n      });\n      script.addEventListener('error', function () {\n        reject(new Error('Failed to load Stripe.js'));\n      });\n    } catch (error) {\n      reject(error);\n      return;\n    }\n  });\n  return stripePromise;\n};\n\nvar initStripe = function initStripe(maybeStripe, args, startTime) {\n  if (maybeStripe === null) {\n    return null;\n  }\n\n  var stripe = maybeStripe.apply(undefined, args);\n  registerWrapper(stripe, startTime);\n  return stripe;\n}; // own script injection.\n\n\nvar stripePromise$1 = Promise.resolve().then(function () {\n  return loadScript(null);\n});\nvar loadCalled = false;\nstripePromise$1[\"catch\"](function (err) {\n  if (!loadCalled) {\n    console.warn(err);\n  }\n});\n\nvar loadStripe = function loadStripe() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  loadCalled = true;\n  var startTime = Date.now();\n  return stripePromise$1.then(function (maybeStripe) {\n    return initStripe(maybeStripe, args, startTime);\n  });\n};\n\nexport { loadStripe };","import React, { useState } from 'react'\nimport { loadStripe } from '@stripe/stripe-js'\n\nconst STRIPE_PUBLISHABLE_KEY = process.env.GATSBY_STRIPE_PUBLISHABLE_LIVE_KEY;\n\nconst buttonStyles = {\n  fontSize: '.9em',\n  textAlign: 'center',\n  color: '#000',\n  padding: '8px 12px',\n  letterSpacing: '0.1em',\n  textTransform: 'uppercase',\n  border: '#000 2px solid',\n  borderRadius: '5px',\n  background: 'transparent'\n}\n\nconst buttonDisabledStyles = {\n  opacity: '0.5',\n  cursor: 'not-allowed',\n}\n\n//const EUCountries = ['AT', 'BE', 'HR', 'BG', 'CY', 'CZ', 'DK', 'EE', 'FI', 'FR', 'DE', 'GR', 'HU', 'IE', 'IT', 'LV', 'LT', 'LU', 'MT', 'NL', 'PL', 'PT', 'RO', 'SK', 'SI', 'ES', 'SE', 'GB']\n\nconst worldCountries = ['AC', 'AD', 'AE', 'AF', 'AG', 'AI', 'AL', 'AM', 'AO', 'AQ', 'AR', 'AT', 'AU', 'AW', 'AX', 'AZ', 'BA', 'BB', 'BD', 'BE', 'BF', 'BG', 'BH', 'BI', 'BJ', 'BL', 'BM', 'BN', 'BO', 'BQ', 'BR', 'BS', 'BT', 'BV', 'BW', 'BY', 'BZ', 'CA', 'CD', 'CF', 'CG', 'CH', 'CI', 'CK', 'CL', 'CM', 'CN', 'CO', 'CR', 'CV', 'CW', 'CY', 'CZ', 'DE', 'DJ', 'DK', 'DM', 'DO', 'DZ', 'EC', 'EE', 'EG', 'EH', 'ER', 'ES', 'ET', 'FI', 'FJ', 'FK', 'FO', 'FR', 'GA', 'GB', 'GD', 'GE', 'GF', 'GG', 'GH', 'GI', 'GL', 'GM', 'GN', 'GP', 'GQ', 'GR', 'GS', 'GT', 'GU', 'GW', 'GY', 'HK', 'HN', 'HR', 'HT', 'HU', 'ID', 'IE', 'IL', 'IM', 'IN', 'IO', 'IQ', 'IS', 'IT', 'JE', 'JM', 'JO', 'JP', 'KE', 'KG', 'KH', 'KI', 'KM', 'KN', 'KR', 'KW', 'KY', 'KZ', 'LA', 'LB', 'LC', 'LI', 'LK', 'LR', 'LS', 'LT', 'LU', 'LV', 'LY', 'MA', 'MC', 'MD', 'ME', 'MF', 'MG', 'MK', 'ML', 'MM', 'MN', 'MO', 'MQ', 'MR', 'MS', 'MT', 'MU', 'MV', 'MW', 'MX', 'MY', 'MZ', 'NA', 'NC', 'NE', 'NG', 'NI', 'NL', 'NO', 'NP', 'NR', 'NU', 'NZ', 'OM', 'PA', 'PE', 'PF', 'PG', 'PH', 'PK', 'PL', 'PM', 'PN', 'PR', 'PS', 'PT', 'PY', 'QA', 'RE', 'RO', 'RS', 'RU', 'RW', 'SA', 'SB', 'SC', 'SE', 'SG', 'SH', 'SI', 'SJ', 'SK', 'SL', 'SM', 'SN', 'SO', 'SR', 'SS', 'ST', 'SV', 'SX', 'SZ', 'TA', 'TC', 'TD', 'TF', 'TG', 'TH', 'TJ', 'TK', 'TL', 'TM', 'TN', 'TO', 'TR', 'TT', 'TV', 'TW', 'TZ', 'UA', 'UG', 'US', 'UY', 'UZ', 'VA', 'VC', 'VE', 'VG', 'VN', 'VU', 'WF', 'WS', 'XK', 'YE', 'YT', 'ZA', 'ZM', 'ZW', 'ZZ']\n\nlet stripePromise\nconst getStripe = () => {\n  if (!stripePromise) {\n    stripePromise = loadStripe(STRIPE_PUBLISHABLE_KEY)\n  }\n  return stripePromise\n}\n\nconst Checkout = ({ slug, priceID }) => {\n\n  let url = typeof window !== 'undefined' ? window.location.origin : '';\n  url = `${url}/edition/${slug}`\n\n  const [loading, setLoading] = useState(false)\n\n  const redirectToCheckout = async event => {\n    event.preventDefault()\n    setLoading(true)\n\n    const stripe = await getStripe()\n    const { error } = await stripe.redirectToCheckout({\n      mode: 'payment',\n      lineItems: [{\n        price: priceID,\n        quantity: 1\n      }],\n      shippingAddressCollection: {\n        allowedCountries: worldCountries,\n      },\n      successUrl: `${url}?checkout=success`,\n      cancelUrl: `${url}?checkout=cancel`,\n    })\n\n    if (error) {\n      console.warn('Error:', error)\n      setLoading(false)\n    }\n  }\n\n  return (\n    <button\n      disabled={loading}\n      style={\n        loading ? { ...buttonStyles, ...buttonDisabledStyles } : buttonStyles\n      }\n      onClick={redirectToCheckout}\n    >\n      Buy the edition\n    </button>\n  )\n}\n\nexport default Checkout\n","import React from 'react'\nimport Helmet from 'react-helmet'\nimport get from 'lodash/get'\nimport Img from 'gatsby-image'\nimport { graphql } from 'gatsby'\n\nimport Layout from '../components/layout'\nimport ContentBlock from '../components/content-block'\nimport Slideshow from '../components/slideshow'\nimport Checkout from '../components/checkout'\n\nclass EditionTemplate extends React.Component {\n\n  getChechoutStatus = () => {\n//    console.log('location:', window.location)\n    let url = typeof window !== 'undefined' ? window.location.href : '';\n    return (url.indexOf('checkout')>0) ?\n      url.substr(url.indexOf('=')+1) : 'initial'\n  }\n\n\n  render() {\n\n//    console.log('props:', window.location)\n\n\n    const edition = get(this.props, 'data.contentfulEdition')\n//    console.log(edition);\n\n    // ––– Slideshow or featured images –––\n\n    var ImageOrSlides;\n    if (edition.editionImpressionsSlideshow != null){\n      ImageOrSlides =(\n        <Slideshow slides={edition.editionImpressionsSlideshow} length={edition.editionImpressionsSlideshow.length} />\n      );\n    }\n    else{\n      ImageOrSlides =(\n        <Img alt=\"FeaturedImage\" fluid={{...edition.featuredImage.fluid , aspectRatio: 16/9}} />\n      );\n    }\n\n\n    // ––– Further Content Blocks –––\n\n    var FurtherContentBlocks;\n    if (edition.furtherInformationBlocks){\n      FurtherContentBlocks =(\n        edition.furtherInformationBlocks.map(({id, title, childContentfulContentBlockBlockContentTextNode}) => {\n          return (\n              <ContentBlock key={id} blockTitle={title} blockContent={childContentfulContentBlockBlockContentTextNode} />\n          )\n        })\n      );\n    }\n\n    // --- Checkout ---\n\n    const checkoutStatus = this.getChechoutStatus()\n    var EditionCheckout;\n\n    if (edition.stripePriceId){\n      if (checkoutStatus === 'success'){\n        EditionCheckout=(\n          <div className=\"alert alert-success\"><p><strong>Thank you for your purchase.</strong></p><p>Once we receive your payment, we will contact you for shipping details.</p><p> Enjoy the edition!</p></div>\n        )\n      }\n      else{\n        EditionCheckout = (\n          <Checkout slug={edition.slug} priceID={edition.stripePriceId} />\n        )\n      }\n    }\n\n    //==========================================================================\n\n    //                                OUTPUT\n\n    //==========================================================================\n\n    return (\n      <Layout>\n      <main>\n        <Helmet title={`${edition.title}`} />\n        <section className=\"head\">\n          <div className=\"row headline\">\n            <div className=\"col-md-12 col-sm-12 col-xs-12\">\n\n              <h1>{edition.title}</h1>\n              <div className=\"subtitle\" dangerouslySetInnerHTML={{\n                  __html: edition.subtitleShortDescription.childMarkdownRemark.html\n                }} />\n\n              {/*  ---- FEATURED IMAGE ---- */}\n\n              {ImageOrSlides}\n\n            </div>\n          </div>\n        </section>\n\n        {/*  ---- ABOUT ---- */}\n\n        <section className=\"further\">\n          <div className=\"row\">\n            <div className=\"col-md-4 col-sm-4 col-xs-12\">\n              <h2>About the edition</h2>\n              {EditionCheckout}\n            </div>\n            <div className=\"col-md-8 col-sm-8 col-xs-12\">\n              <div dangerouslySetInnerHTML={{\n                __html: edition.description.childMarkdownRemark.html\n              }} />\n            </div>\n          </div>\n        </section>\n\n        {/*  ---- ADDITIONAL BLOCKS (each a section) ---- */}\n\n        {FurtherContentBlocks}\n\n      </main>\n      </Layout>\n    )\n  }\n}\n\nexport default EditionTemplate;\n\n\n\n//==========================================================================\n\n//                                QUERY\n\n//==========================================================================\n\n\nexport const pageQuery = graphql`\n  query EditionBySlug($slug: String!) {\n    contentfulEdition(slug: { eq: $slug }) {\n      title\n      slug\n      subtitleShortDescription {\n        childMarkdownRemark {\n          html\n        }\n      }\n      description {\n        childMarkdownRemark {\n          html\n        }\n      }\n      stripePriceId\n      furtherInformationBlocks {\n        id\n        title\n        childContentfulContentBlockBlockContentTextNode {\n          id\n          childMarkdownRemark {\n            html\n          }\n        }\n      }\n      featuredImage{\n        fluid(maxWidth: 1000) {\n          sizes\n          src\n        }\n      }\n      editionImpressionsSlideshow{\n        fluid(maxWidth: 1000) {\n          sizes\n          src\n        }\n        description\n      }\n    }\n  }\n`\n"],"sourceRoot":""}