(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"+oIS":function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n);t.a=function(e){var t=e.blockTitle,a=e.blockContent;return r.a.createElement("section",{className:"further"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-4 col-sm-4 col-xs-12"},r.a.createElement("h2",null,t)),r.a.createElement("div",{className:"col-md-8 col-sm-8 col-xs-12"},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:a.childMarkdownRemark.html}}))))}},"5HML":function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),l=a("9eSz"),o=a.n(l);t.a=function(e){var t=e.slides;e.length;return r.a.createElement("div",{id:"myCarousel",className:"row carousel slide","data-ride":"carousel"},r.a.createElement("ol",{className:"carousel-indicators"},t.map((function(e,t){e.sizes;var a=t,n=0===t?"active":"";return r.a.createElement("li",{"data-target":"#myCarousel","data-slide-to":a,className:n})}))),r.a.createElement("div",{className:"carousel-inner",role:"listbox"},t.map((function(e,t){var a=e.fluid,n=e.description,l=0===t?"carousel-item active":"carousel-item";return r.a.createElement("div",{className:l},r.a.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12"},r.a.createElement("div",{className:"image-wrapper 3-col"},r.a.createElement(o.a,{alt:"FeaturedImage",fluid:Object.assign({},a,{aspectRatio:16/9})})),r.a.createElement("p",null,n)))}))),r.a.createElement("a",{className:"carousel-control-prev",href:"#myCarousel",role:"button","data-slide":"prev"},r.a.createElement("span",{className:"carousel-control-prev-icon","aria-hidden":"true"}),r.a.createElement("span",{className:"sr-only"},"Previous")),r.a.createElement("a",{className:"carousel-control-next",href:"#myCarousel",role:"button","data-slide":"next"},r.a.createElement("span",{className:"carousel-control-next-icon","aria-hidden":"true"}),r.a.createElement("span",{className:"sr-only"},"Next")))}},d0S5:function(e,t,a){"use strict";a.r(t);var n=a("dI71"),r=a("q1tI"),l=a.n(r),o=a("TJpk"),c=a.n(o),s=a("mwIZ"),i=a.n(s),u=a("9eSz"),d=a.n(u),m=a("Bl7J"),p=a("+oIS"),f=a("5HML"),E=a("o0o1"),h=a.n(E),v=(a("ls82"),a("HaE+")),w="https://js.stripe.com/v3",g=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,S="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",y=null,b=function(e){return null!==y?y:y=new Promise((function(t,a){if("undefined"!=typeof window)if(window.Stripe&&e&&console.warn(S),window.Stripe)t(window.Stripe);else try{var n=function(){for(var e=document.querySelectorAll('script[src^="'.concat(w,'"]')),t=0;t<e.length;t++){var a=e[t];if(g.test(a.src))return a}return null}();n&&e?console.warn(S):n||(n=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",a=document.createElement("script");a.src="".concat(w).concat(t);var n=document.head||document.body;if(!n)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(a),a}(e)),n.addEventListener("load",(function(){window.Stripe?t(window.Stripe):a(new Error("Stripe.js not available"))})),n.addEventListener("error",(function(){a(new Error("Failed to load Stripe.js"))}))}catch(r){return void a(r)}else t(null)}))},I=function(e,t,a){if(null===e)return null;var n=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"1.13.1",startTime:t})}(n,a),n},N=Promise.resolve().then((function(){return b(null)})),x=!1;N.catch((function(e){x||console.warn(e)}));var k,C={}.STRIPE_PUBLISHABLE_TEST_KEY,T={fontSize:".9em",textAlign:"center",color:"#000",padding:"8px 12px",letterSpacing:"0.1em",textTransform:"uppercase",border:"#000 2px solid",borderRadius:"5px",background:"transparent"},L={opacity:"0.5",cursor:"not-allowed"},j=["AT","BE","HR","BG","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","GB","US","CA"],B=function(){return k||(k=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];x=!0;var n=Date.now();return N.then((function(e){return I(e,t,n)}))}(C)),k},R=function(e){var t=e.slug,a=e.priceID,n=window.location.origin+"/edition/"+t,o=Object(r.useState)(!1),c=o[0],s=o[1],i=function(){var e=Object(v.a)(h.a.mark((function e(t){var r,l,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s(!0),e.next=4,B();case 4:return r=e.sent,e.next=7,r.redirectToCheckout({mode:"payment",lineItems:[{price:a,quantity:1}],shippingAddressCollection:{allowedCountries:j},successUrl:n+"?checkout=success",cancelUrl:n+"?checkout=cancel"});case 7:l=e.sent,(o=l.error)&&(console.warn("Error:",o),s(!1));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement("button",{disabled:c,style:c?Object.assign({},T,L):T,onClick:i},"Buy the edition")},_=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).getChechoutStatus=function(){var e="undefined"!=typeof window?window.location.href:"";return e.indexOf("checkout")>0?e.substr(e.indexOf("=")+1):"initial"},t}return Object(n.a)(t,e),t.prototype.render=function(){console.log("props:",window.location);var e,t,a=i()(this.props,"data.contentfulEdition");console.log(a),e=null!=a.editionImpressionsSlideshow?l.a.createElement(f.a,{slides:a.editionImpressionsSlideshow,length:a.editionImpressionsSlideshow.length}):l.a.createElement(d.a,{alt:"FeaturedImage",fluid:Object.assign({},a.featuredImage.fluid,{aspectRatio:16/9})}),a.furtherInformationBlocks&&(t=a.furtherInformationBlocks.map((function(e){var t=e.id,a=e.title,n=e.childContentfulContentBlockBlockContentTextNode;return l.a.createElement(p.a,{key:t,blockTitle:a,blockContent:n})})));var n,r=this.getChechoutStatus();return a.stripePriceId&&(n="success"===r?l.a.createElement("div",{className:"alert alert-success"},l.a.createElement("p",null,l.a.createElement("strong",null,"Thank you for your purchase.")),l.a.createElement("p",null,"Once we receive your payment, we will contact you for shipping details."),l.a.createElement("p",null," Enjoy the edition!")):l.a.createElement(R,{slug:a.slug,priceID:a.stripePriceId})),l.a.createElement(m.a,null,l.a.createElement("main",null,l.a.createElement(c.a,{title:""+a.title}),l.a.createElement("section",{className:"head"},l.a.createElement("div",{className:"row headline"},l.a.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12"},l.a.createElement("h1",null,a.title),l.a.createElement("div",{className:"subtitle",dangerouslySetInnerHTML:{__html:a.subtitleShortDescription.childMarkdownRemark.html}}),e))),l.a.createElement("section",{className:"further"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-4 col-sm-4 col-xs-12"},l.a.createElement("h2",null,"About the edition"),n),l.a.createElement("div",{className:"col-md-8 col-sm-8 col-xs-12"},l.a.createElement("div",{dangerouslySetInnerHTML:{__html:a.description.childMarkdownRemark.html}})))),t))},t}(l.a.Component);t.default=_}}]);
//# sourceMappingURL=component---src-templates-edition-js-b114f660ad5f49780dff.js.map