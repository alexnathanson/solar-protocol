(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"+oIS":function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a);t.a=function(e){var t=e.blockTitle,n=e.blockContent;return r.a.createElement("section",{className:"further"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-4 col-sm-4 col-xs-12"},r.a.createElement("h2",null,t)),r.a.createElement("div",{className:"col-md-8 col-sm-8 col-xs-12"},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:n.childMarkdownRemark.html}}))))}},"5HML":function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),l=n("9eSz"),o=n.n(l);t.a=function(e){var t=e.slides;e.length;return r.a.createElement("div",{id:"myCarousel",className:"row carousel slide","data-ride":"carousel"},r.a.createElement("ol",{className:"carousel-indicators"},t.map((function(e,t){e.sizes;var n=t,a=0===t?"active":"";return r.a.createElement("li",{"data-target":"#myCarousel","data-slide-to":n,className:a})}))),r.a.createElement("div",{className:"carousel-inner",role:"listbox"},t.map((function(e,t){var n=e.fluid,a=e.description,l=0===t?"carousel-item active":"carousel-item";return r.a.createElement("div",{className:l},r.a.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12"},r.a.createElement("div",{className:"image-wrapper 3-col"},r.a.createElement(o.a,{alt:"FeaturedImage",fluid:Object.assign({},n,{aspectRatio:16/9})})),r.a.createElement("p",null,a)))}))),r.a.createElement("a",{className:"carousel-control-prev",href:"#myCarousel",role:"button","data-slide":"prev"},r.a.createElement("span",{className:"carousel-control-prev-icon","aria-hidden":"true"}),r.a.createElement("span",{className:"sr-only"},"Previous")),r.a.createElement("a",{className:"carousel-control-next",href:"#myCarousel",role:"button","data-slide":"next"},r.a.createElement("span",{className:"carousel-control-next-icon","aria-hidden":"true"}),r.a.createElement("span",{className:"sr-only"},"Next")))}},d0S5:function(e,t,n){"use strict";n.r(t);var a=n("dI71"),r=n("q1tI"),l=n.n(r),o=n("TJpk"),c=n.n(o),s=n("mwIZ"),i=n.n(s),u=n("9eSz"),d=n.n(u),m=n("Bl7J"),p=n("+oIS"),f=n("5HML"),h=n("o0o1"),E=n.n(h),w=(n("ls82"),n("HaE+")),v="https://js.stripe.com/v3",g=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,S="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",y=null,b=function(e){return null!==y?y:y=new Promise((function(t,n){if("undefined"!=typeof window)if(window.Stripe&&e&&console.warn(S),window.Stripe)t(window.Stripe);else try{var a=function(){for(var e=document.querySelectorAll('script[src^="'.concat(v,'"]')),t=0;t<e.length;t++){var n=e[t];if(g.test(n.src))return n}return null}();a&&e?console.warn(S):a||(a=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(v).concat(t);var a=document.head||document.body;if(!a)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return a.appendChild(n),n}(e)),a.addEventListener("load",(function(){window.Stripe?t(window.Stripe):n(new Error("Stripe.js not available"))})),a.addEventListener("error",(function(){n(new Error("Failed to load Stripe.js"))}))}catch(r){return void n(r)}else t(null)}))},N=function(e,t,n){if(null===e)return null;var a=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"1.13.1",startTime:t})}(a,n),a},x=Promise.resolve().then((function(){return b(null)})),k=!1;x.catch((function(e){k||console.warn(e)}));var I,C={}.STRIPE_PUBLISHABLE_KEY,T={fontSize:".9em",textAlign:"center",color:"#000",padding:"8px 12px",letterSpacing:"0.1em",textTransform:"uppercase",border:"#000 2px solid",borderRadius:"5px",background:"transparent"},L={opacity:"0.5",cursor:"not-allowed"},j=function(){return I||(I=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];k=!0;var a=Date.now();return x.then((function(e){return N(e,t,a)}))}(C)),I},B=function(e){var t=e.slug,n=window.location.origin+"/edition/"+t,a=Object(r.useState)(!1),o=a[0],c=a[1],s=function(){var e=Object(w.a)(E.a.mark((function e(t){var a,r,l;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),c(!0),e.next=4,j();case 4:return a=e.sent,e.next=7,a.redirectToCheckout({mode:"payment",lineItems:[{price:"price_1IXXQqJ1sNuO02XTuYiyaCo3",quantity:1}],shippingAddressCollection:{allowedCountries:["AT","BE","HR","BG","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","GB","US","CA"]},successUrl:n+"?checkout=success",cancelUrl:n+"?checkout=cancel"});case 7:r=e.sent,(l=r.error)&&(console.warn("Error:",l),c(!1));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement("button",{disabled:o,style:o?Object.assign({},T,L):T,onClick:s},"Buy the edition")},O=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this).getChechoutStatus=function(){console.log("location:",window.location);var e="undefined"!=typeof window?window.location.href:"";return e.indexOf("checkout")>0?e.substr(e.indexOf("=")+1):"initial"},t}return Object(a.a)(t,e),t.prototype.render=function(){console.log("props:",window.location);var e,t,n,a=i()(this.props,"data.contentfulEdition");return console.log(a),e=null!=a.editionImpressionsSlideshow?l.a.createElement(f.a,{slides:a.editionImpressionsSlideshow,length:a.editionImpressionsSlideshow.length}):l.a.createElement(d.a,{alt:"FeaturedImage",fluid:Object.assign({},a.featuredImage.fluid,{aspectRatio:16/9})}),a.furtherInformationBlocks&&(t=a.furtherInformationBlocks.map((function(e){var t=e.id,n=e.title,a=e.childContentfulContentBlockBlockContentTextNode;return l.a.createElement(p.a,{key:t,blockTitle:n,blockContent:a})}))),n="success"===this.getChechoutStatus()?l.a.createElement("div",{className:"alert alert-success"},l.a.createElement("p",null,l.a.createElement("strong",null,"Thank you for your purchase.")),l.a.createElement("p",null,"Once we receive your payment, we will contact you for shipping details."),l.a.createElement("p",null," Enjoy the edition!")):l.a.createElement(B,{slug:a.slug}),l.a.createElement(m.a,null,l.a.createElement("main",null,l.a.createElement(c.a,{title:""+a.title}),l.a.createElement("section",{className:"head"},l.a.createElement("div",{className:"row headline"},l.a.createElement("div",{className:"col-md-12 col-sm-12 col-xs-12"},l.a.createElement("h1",null,a.title),l.a.createElement("div",{className:"subtitle",dangerouslySetInnerHTML:{__html:a.subtitleShortDescription.childMarkdownRemark.html}}),e))),l.a.createElement("section",{className:"further"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-4 col-sm-4 col-xs-12"},l.a.createElement("h2",null,"About the edition"),n),l.a.createElement("div",{className:"col-md-8 col-sm-8 col-xs-12"},l.a.createElement("div",{dangerouslySetInnerHTML:{__html:a.description.childMarkdownRemark.html}})))),t))},t}(l.a.Component);t.default=O}}]);
//# sourceMappingURL=component---src-templates-edition-js-e89f3cc1bbd3e5b1c876.js.map